<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="commit-message" />
  <meta name="description" content="commit-message" />
  <title>commit-message</title>
  <link rel="shortcut icon" href="/img/favicon.ico"/>
  <link rel="stylesheet" href="/build/community.md.css" />
</head>
<body>
  <div id="root"><div class="md2html community-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_colorful.svg"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><div><ul class="ant-menu blackClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/1.3.4/user_doc/quick-start.html" target="_self">文档</a><ul style="display:none"><li><a href="/zh-cn/docs/1.3.4/user_doc/quick-start.html" target="_self">1.3.4(推荐)</a></li><li><a href="/zh-cn/docs/1.3.3/user_doc/quick-start.html" target="_self">1.3.3</a></li><li><a href="/zh-cn/docs/1.3.2/user_doc/quick-start.html" target="_self">1.3.2</a></li><li><a href="/zh-cn/docs/1.3.1/user_doc/quick-start.html" target="_self">1.3.1</a></li><li><a href="/zh-cn/docs/1.2.1/user_doc/quick-start.html" target="_self">1.2.1</a></li><li><a href="/zh-cn/docs/1.2.0/user_doc/quick-start.html" target="_self">1.2.0</a></li><li><a href="https://analysys.github.io/easyscheduler_docs_cn/" target="_self">1.1.0(Not Apache Release)</a></li></ul></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">下载</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">开发者</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-selected" role="menuitem"><a href="/zh-cn/community/index.html" target="_self">社区</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a><ul style="display:none"><li><a href="https://www.apache.org/" target="_blank">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></li></ul></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div></div></header><div class="bar"><div class="bar-body"><img src="/img/system/community.png" class="front-img"/><span>社区</span><img src="/img/system/community.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>社区动态</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/index.html" target="_self">社区动态</a></li></ul></li><li class="menu-item menu-item-level-1"><span>团队</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/team.html" target="_self">团队介绍</a></li></ul></li><li class="menu-item menu-item-level-1"><span>安全</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/security.html" target="_self">安全介绍</a></li></ul></li><li class="menu-item menu-item-level-1"><span>发版指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/release.html" target="_self">发版指南</a></li></ul></li><li class="menu-item menu-item-level-1"><span>贡献指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/become a committer.html" target="_self">如何成为Dolphinscheduler的committer</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/subscribe.html" target="_blank">订阅邮件列表</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/contribute.html" target="_self">参与贡献</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/code-conduct.html" target="_self">行为准则</a></li></ul></li><li class="menu-item menu-item-level-1"><span>提交者指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/submit-code.html" target="_self">提交流程</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/DS-License.html" target="_self">参与贡献-License需知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/document.html" target="_self">参与贡献-文档需知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/issue.html" target="_self">参与贡献-Issue需知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/pull-request.html" target="_self">参与贡献-Pull Request需知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/commit-message.html" target="_self">参与贡献-CommitMessage需知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/microbench.html" target="_self">参与贡献-微基准测试</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h2>DolphinScheduler-Contributor-CommitMessage篇</h2>
<h3>前言</h3>
<p>一个好的 commit message 是能够帮助其他的开发者（或者未来的开发者）快速理解相关变更的上下文，同时也可以帮助项目管理人员确定该提交是否适合包含在发行版中。但当我们在查看了很多开源项目的 commit log 后，发现一个有趣的问题，一部分开发者，代码质量很不错，但是 commit message 记录却比较混乱，当其他贡献者或者学习者在查看代码的时候，并不能通过 commit log 很直观的了解
该提交前后变更的目的，正如 Peter Hutterer 所言：Re-establishing the context of a piece of code is wasteful. We can’t avoid it completely, so our efforts should go to reducing it as much as possible. Commit messages can do exactly that and as a result, a commit message shows whether a developer is a good collaborator. 因此，DolphinScheduler 结合其他社区以及 Apache 官方文档制定了该规约。</p>
<h3>Commit Message RIP</h3>
<h4>1：明确修改内容</h4>
<p>commit message 应该明确说明该提交解决了哪些问题（bug 修复、功能增强等），以便于用户开发者更好的跟踪问题，明确版本迭代过程中的优化情况。</p>
<h4>2：关联相应的Pull Request 或者Issue</h4>
<p>当我们的改动较大的时候，commit message 最好能够关联 Github 上的相关 Issue 或者 Pull Request，这样，我们的开发者在查阅代码的时候能够通过关联信息较为迅速的了解改代码提交的上下文情景，如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue。</p>
<h4>3：统一的格式</h4>
<p>格式化后的 CommitMessage 能够帮助我们提供更多的历史信息，方便快速浏览，同时也可以直接从 commit 生成 Change Log。</p>
<p>Commit message 应该包括三个部分：Header，Body 和 Footer。其中，Header 是必需的，Body 和 Footer 可以省略。</p>
<h5>header</h5>
<p>Header 部分只有一行，包括三个字段：type（必需）、scope（可选）和 subject（必需）。</p>
<p>[DS-ISSUE编号][type] subject</p>
<p>(1) type 用于说明 commit 的类别，只允许使用下面7个标识。</p>
<ul>
<li>feat：新功能（feature）</li>
<li>fix：修补bug</li>
<li>docs：文档（documentation）</li>
<li>style： 格式（不影响代码运行的变动）</li>
<li>refactor：重构（即不是新增功能，也不是修改bug的代码变动）</li>
<li>test：增加测试</li>
<li>chore：构建过程或辅助工具的变动</li>
</ul>
<p>如果 type 为 feat 和 fix，则该 commit 将肯定出现在 Change log 之中。其他情况（docs、chore、style、refactor、test）建议不放入。</p>
<p>(2）scope</p>
<p>scope 用于说明 commit 影响的范围，比如 server、remote 等，如果没有更合适的范围，你可以用 *。</p>
<p>(3) subject</p>
<p>subject 是 commit 目的的简短描述，不超过50个字符。</p>
<h5>Body</h5>
<p>Body 部分是对本次 commit 的详细描述，可以分成多行，换行符将以72个字符换行，避免自动换行影响美观。</p>
<p>Body 部分需要注意以下几点：</p>
<ul>
<li>
<p>使用动宾结构，注意使用现在时，比如使用 change 而非 changed 或 changes</p>
</li>
<li>
<p>首字母不要大写</p>
</li>
<li>
<p>语句最后不需要 ‘.’ (句号) 结尾</p>
</li>
</ul>
<h5>Footer</h5>
<p>Footer只适用于两种情况</p>
<p>(1) 不兼容变动</p>
<p>如果当前代码与上一个版本不兼容，则 Footer 部分以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动理由和迁移方法。</p>
<p>(2) 关闭 Issue</p>
<p>如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue,也可以一次关闭多个 issue 。</p>
<h5>举个例子</h5>
<p>[DS-001][docs-zh] add commit message</p>
<ul>
<li>commit message RIP</li>
<li>build some conventions</li>
<li>help the commit messages become clean and tidy</li>
<li>help developers and release managers better track issues
and clarify the optimization in the version iteration</li>
</ul>
<p>This closes #001</p>
<h3>参考文档</h3>
<p><a href="https://cwiki.apache.org/confluence/display/GEODE/Commit+Message+Format">提交消息格式</a></p>
<p><a href="http://who-t.blogspot.com/2009/12/on-commit-messages.html">On commit messages-Peter Hutterer</a></p>
<p><a href="https://mp.weixin.qq.com/s/LKM4IXAY-7dKhTzGu5-oug">RocketMQ Community Operation Conventions</a></p>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/ds_gray.svg"/><div class="cols-container"><div class="col col-12"><h3>Disclaimer</h3><p>Apache DolphinScheduler is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/zh-cn/development/architecture-design.html" target="_self">概览</a></dd><dd><a href="/zh-cn/docs/1.3.4/user_doc/quick-start.html" target="_self">快速开始</a></dd><dd><a href="/zh-cn/development/backend-development.html" target="_self">开发者指南</a></dd></dl></div><div class="col col-6"><dl><dt>ASF</dt><dd><a href="http://www.apache.org" target="_self">基金会</a></dd><dd><a href="http://www.apache.org/licenses/" target="_self">证书</a></dd><dd><a href="http://www.apache.org/events/current-event" target="_self">事件</a></dd><dd><a href="http://www.apache.org/foundation/sponsorship.html" target="_self">赞助</a></dd><dd><a href="http://www.apache.org/foundation/thanks.html" target="_self">致谢</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
  <script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/community.md.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4e7b4b400dd31fa015018a435c64d06f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</body>
</html>